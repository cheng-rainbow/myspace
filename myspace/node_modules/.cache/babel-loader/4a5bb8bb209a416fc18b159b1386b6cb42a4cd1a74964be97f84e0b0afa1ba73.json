{"ast":null,"code":"import $ from 'jquery';\nimport { useStore } from 'vuex';\nexport default {\n  name: \"UserProfileInfo\",\n  props: {\n    user: {\n      type: Object,\n      required: true\n    }\n  },\n  setup: (props, context) => {\n    const store = useStore();\n    const follow = () => {\n      $.ajax({\n        url: \"https://app165.acapp.acwing.com.cn/myspace/follow/\",\n        type: \"POST\",\n        data: {\n          target_id: props.user.id\n        },\n        headers: {\n          'Authorization': \"Bearer \" + store.state.user.access\n        },\n        success(resp) {\n          if (resp.result === \"success\") {\n            context.emit('follow');\n          }\n        }\n      });\n    };\n    const unfollow = () => {\n      $.ajax({\n        url: \"https://app165.acapp.acwing.com.cn/myspace/follow/\",\n        type: \"POST\",\n        data: {\n          target_id: props.user.id\n        },\n        headers: {\n          'Authorization': \"Bearer \" + store.state.user.access\n        },\n        success(resp) {\n          if (resp.result === \"success\") {\n            context.emit('unfollow');\n          }\n        }\n      });\n    };\n    return {\n      follow,\n      unfollow\n    };\n  }\n};","map":{"version":3,"names":["$","useStore","name","props","user","type","Object","required","setup","context","store","follow","ajax","url","data","target_id","id","headers","state","access","success","resp","result","emit","unfollow"],"sources":["D:\\a.project.vscode\\项目\\vue\\myspace\\src\\components\\UserProfileInfo.vue"],"sourcesContent":["<template>\r\n    <div class=\"card\">\r\n        <div class=\"car-body\">\r\n            <div class=\"row\">\r\n                <div class=\"col-3 img-field\">\r\n                    <img class=\"img-fluid \" :src=\"user.photo\" alt=\"\">\r\n                </div>  \r\n                <div class=\"col-9\">\r\n                    <div class=\"username\">{{ user.username }}</div>\r\n                    <div class=\"fans\">粉丝: {{ user.followerCount }}</div>\r\n                    <button @click=\"follow\" v-if=\"!user.is_followed\" type=\"button\" class=\"btn btn-primary btn-sm\">+ 关注</button>\r\n                    <button @click=\"unfollow\" v-if=\"user.is_followed\" type=\"button\" class=\"btn btn-primary btn-sm\">取消关注</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  \r\n    \r\n</template>\r\n\r\n<script>\r\n\r\nimport $ from 'jquery';\r\nimport { useStore } from 'vuex';\r\n\r\nexport default {\r\n    name : \"UserProfileInfo\",\r\n    \r\n    props : {\r\n        user : {\r\n            type : Object,\r\n            required : true,\r\n        }\r\n    },\r\n\r\n    setup : (props, context) => {\r\n        const store = useStore();\r\n        const follow = () => {\r\n            $.ajax ({\r\n                url : \"https://app165.acapp.acwing.com.cn/myspace/follow/\",\r\n                type : \"POST\",\r\n                data : {\r\n                    target_id : props.user.id,\r\n                },\r\n                headers : {\r\n                    'Authorization' : \"Bearer \" + store.state.user.access,\r\n                },\r\n                success (resp) {\r\n                    if (resp.result === \"success\") {\r\n                        context.emit('follow')\r\n                    }\r\n                    \r\n                }\r\n            })\r\n        }\r\n\r\n        const unfollow = () => {\r\n\r\n            $.ajax ({\r\n                url : \"https://app165.acapp.acwing.com.cn/myspace/follow/\",\r\n                type : \"POST\",\r\n                data : {\r\n                    target_id : props.user.id,\r\n                },\r\n                headers : {\r\n                    'Authorization' : \"Bearer \" + store.state.user.access,\r\n                },\r\n                success (resp) {\r\n                    if (resp.result === \"success\") {\r\n                        context.emit('unfollow');\r\n                    }\r\n                    \r\n                }\r\n            })\r\n\r\n        }\r\n\r\n        return {\r\n            follow,\r\n            unfollow,\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\nimg {\r\n    border-radius: 50%;\r\n}\r\n\r\n.username {\r\n    font-weight: bold;\r\n\r\n}\r\n\r\n.fans {\r\n    color: grey;\r\n    font-size: 12px;\r\n}\r\n\r\nbutton {\r\n    padding: 2px 4px;\r\n    font-size: 12px;\r\n}\r\n\r\n.img-field {\r\n\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n\r\n}\r\n</style>"],"mappings":"AAsBA,OAAOA,CAAA,MAAO,QAAQ;AACtB,SAASC,QAAO,QAAS,MAAM;AAE/B,eAAe;EACXC,IAAG,EAAI,iBAAiB;EAExBC,KAAI,EAAI;IACJC,IAAG,EAAI;MACHC,IAAG,EAAIC,MAAM;MACbC,QAAO,EAAI;IACf;EACJ,CAAC;EAEDC,KAAI,EAAIA,CAACL,KAAK,EAAEM,OAAO,KAAK;IACxB,MAAMC,KAAI,GAAIT,QAAQ,CAAC,CAAC;IACxB,MAAMU,MAAK,GAAIA,CAAA,KAAM;MACjBX,CAAC,CAACY,IAAG,CAAG;QACJC,GAAE,EAAI,oDAAoD;QAC1DR,IAAG,EAAI,MAAM;QACbS,IAAG,EAAI;UACHC,SAAQ,EAAIZ,KAAK,CAACC,IAAI,CAACY;QAC3B,CAAC;QACDC,OAAM,EAAI;UACN,eAAc,EAAI,SAAQ,GAAIP,KAAK,CAACQ,KAAK,CAACd,IAAI,CAACe;QACnD,CAAC;QACDC,OAAMA,CAAGC,IAAI,EAAE;UACX,IAAIA,IAAI,CAACC,MAAK,KAAM,SAAS,EAAE;YAC3Bb,OAAO,CAACc,IAAI,CAAC,QAAQ;UACzB;QAEJ;MACJ,CAAC;IACL;IAEA,MAAMC,QAAO,GAAIA,CAAA,KAAM;MAEnBxB,CAAC,CAACY,IAAG,CAAG;QACJC,GAAE,EAAI,oDAAoD;QAC1DR,IAAG,EAAI,MAAM;QACbS,IAAG,EAAI;UACHC,SAAQ,EAAIZ,KAAK,CAACC,IAAI,CAACY;QAC3B,CAAC;QACDC,OAAM,EAAI;UACN,eAAc,EAAI,SAAQ,GAAIP,KAAK,CAACQ,KAAK,CAACd,IAAI,CAACe;QACnD,CAAC;QACDC,OAAMA,CAAGC,IAAI,EAAE;UACX,IAAIA,IAAI,CAACC,MAAK,KAAM,SAAS,EAAE;YAC3Bb,OAAO,CAACc,IAAI,CAAC,UAAU,CAAC;UAC5B;QAEJ;MACJ,CAAC;IAEL;IAEA,OAAO;MACHZ,MAAM;MACNa;IACJ;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}