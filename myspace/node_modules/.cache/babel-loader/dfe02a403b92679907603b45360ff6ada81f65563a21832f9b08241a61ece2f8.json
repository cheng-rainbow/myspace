{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n// import store from '@/store';\nimport ContentBase from '../components/ContentBase.vue';\nimport { ref } from 'vue';\nimport { useStore } from 'vuex';\nimport router from '@/router/index';\nimport $ from 'jquery';\nexport default {\n  name: \"RegisterView\",\n  components: {\n    ContentBase\n  },\n  setup: () => {\n    const store = useStore();\n    let username = ref('');\n    let password = ref('');\n    let password_confirm = ref('');\n    let err_message = ref('');\n    const register = () => {\n      err_message.value = \"\";\n      // console.log(store, router)   \n      // console.log(username.value, password.value, password_confirm.value)\n      $.ajax({\n        url: 'https://app165.acapp.acwing.com.cn/myspace/user/',\n        type: \"POST\",\n        data: {\n          username: username.value,\n          password: password.value,\n          password_confirm: password_confirm.value\n        },\n        success: resp => {\n          if (resp.result === \"success\") {\n            store.dispatch(\"login\", {\n              username: username.value,\n              password: password.value,\n              success: () => {\n                router.push({\n                  name: 'UserListView'\n                });\n              },\n              error: () => {\n                err_message.value = \"系统异常, 稍后尝试\";\n              }\n            });\n          } else {\n            err_message.value = resp.result;\n          }\n        }\n      });\n    };\n    return {\n      username,\n      password,\n      err_message,\n      store,\n      password_confirm,\n      register\n    };\n  }\n};","map":{"version":3,"names":["ContentBase","ref","useStore","router","$","name","components","setup","store","username","password","password_confirm","err_message","register","value","ajax","url","type","data","success","resp","result","dispatch","push","error"],"sources":["D:\\a.project.vscode\\项目\\vue\\myspace\\src\\views\\RegisterView.vue"],"sourcesContent":["<template>\r\n    <ContentBase>\r\n        <div class=\"row justify-content-md-center \">\r\n            <div class=\"col-4\">\r\n                <form @submit.prevent=\"register\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"username\">username</label>\r\n                        <input v-model=\"username\" type=\"text\" class=\"form-control\" id=\"username\" aria-describedby=\"emailHelp\">\r\n                        <small id=\"usernameHelp\" class=\"form-text text-muted\">输入注册的邮箱</small>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <label for=\"password\">password</label>\r\n                        <input v-model=\"password\" type=\"password\" class=\"form-control\" id=\"password\">\r\n                        <div class=\"err-message\">{{ err_message }}</div>\r\n                        <label for=\"password_confirm\" style=\"margin-top: 5px\">confirm password</label>\r\n                        <input v-model=\"password_confirm\" type=\"password\" class=\"form-control\" id=\"password_confirm\">\r\n                    </div>\r\n                    <button type=\"submit\" class=\"btn btn-primary\">登录</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        \r\n    </ContentBase>\r\n</template>\r\n\r\n<script>\r\n// import store from '@/store';\r\nimport ContentBase from '../components/ContentBase.vue'\r\nimport { ref } from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport router from '@/router/index';\r\nimport $ from 'jquery';\r\n\r\nexport default { \r\n    name : \"RegisterView\",\r\n    components : {\r\n        ContentBase \r\n    },\r\n    setup : () => {\r\n        const store = useStore();\r\n        let username = ref('');\r\n        let password = ref('');\r\n        let password_confirm = ref('');\r\n        let err_message = ref('');\r\n\r\n        const register = () => {\r\n            err_message.value = \"\";\r\n            // console.log(store, router)   \r\n            // console.log(username.value, password.value, password_confirm.value)\r\n            $.ajax({\r\n                url : 'https://app165.acapp.acwing.com.cn/myspace/user/',\r\n                type : \"POST\",\r\n                data : {\r\n                    username : username.value,\r\n                    password : password.value,\r\n                    password_confirm : password_confirm.value,\r\n                },\r\n                success : (resp) => {\r\n                    if (resp.result === \"success\") {\r\n                        store.dispatch(\"login\",{\r\n                            username : username.value,\r\n                            password : password.value,\r\n                            success : () => {\r\n                                \r\n                                router.push({name : 'UserListView'})\r\n                            },  \r\n                            error : () => {\r\n                                err_message.value = \"系统异常, 稍后尝试\";\r\n                            }\r\n                        })\r\n                    } else {\r\n                        err_message.value = resp.result;\r\n                    }\r\n                    \r\n                }\r\n            })\r\n        }\r\n\r\n        return {\r\n            username,\r\n            password,\r\n            err_message,\r\n            store,\r\n            password_confirm,\r\n            register,\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.btn {\r\n    width: 100%;\r\n}\r\n\r\n.err-message {\r\n    color: red;\r\n}\r\n\r\n</style>"],"mappings":";AA0BA;AACA,OAAOA,WAAU,MAAO,+BAA8B;AACtD,SAASC,GAAE,QAAS,KAAK;AACzB,SAASC,QAAO,QAAS,MAAM;AAC/B,OAAOC,MAAK,MAAO,gBAAgB;AACnC,OAAOC,CAAA,MAAO,QAAQ;AAEtB,eAAe;EACXC,IAAG,EAAI,cAAc;EACrBC,UAAS,EAAI;IACTN;EACJ,CAAC;EACDO,KAAI,EAAIA,CAAA,KAAM;IACV,MAAMC,KAAI,GAAIN,QAAQ,CAAC,CAAC;IACxB,IAAIO,QAAO,GAAIR,GAAG,CAAC,EAAE,CAAC;IACtB,IAAIS,QAAO,GAAIT,GAAG,CAAC,EAAE,CAAC;IACtB,IAAIU,gBAAe,GAAIV,GAAG,CAAC,EAAE,CAAC;IAC9B,IAAIW,WAAU,GAAIX,GAAG,CAAC,EAAE,CAAC;IAEzB,MAAMY,QAAO,GAAIA,CAAA,KAAM;MACnBD,WAAW,CAACE,KAAI,GAAI,EAAE;MACtB;MACA;MACAV,CAAC,CAACW,IAAI,CAAC;QACHC,GAAE,EAAI,kDAAkD;QACxDC,IAAG,EAAI,MAAM;QACbC,IAAG,EAAI;UACHT,QAAO,EAAIA,QAAQ,CAACK,KAAK;UACzBJ,QAAO,EAAIA,QAAQ,CAACI,KAAK;UACzBH,gBAAe,EAAIA,gBAAgB,CAACG;QACxC,CAAC;QACDK,OAAM,EAAKC,IAAI,IAAK;UAChB,IAAIA,IAAI,CAACC,MAAK,KAAM,SAAS,EAAE;YAC3Bb,KAAK,CAACc,QAAQ,CAAC,OAAO,EAAC;cACnBb,QAAO,EAAIA,QAAQ,CAACK,KAAK;cACzBJ,QAAO,EAAIA,QAAQ,CAACI,KAAK;cACzBK,OAAM,EAAIA,CAAA,KAAM;gBAEZhB,MAAM,CAACoB,IAAI,CAAC;kBAAClB,IAAG,EAAI;gBAAc,CAAC;cACvC,CAAC;cACDmB,KAAI,EAAIA,CAAA,KAAM;gBACVZ,WAAW,CAACE,KAAI,GAAI,YAAY;cACpC;YACJ,CAAC;UACL,OAAO;YACHF,WAAW,CAACE,KAAI,GAAIM,IAAI,CAACC,MAAM;UACnC;QAEJ;MACJ,CAAC;IACL;IAEA,OAAO;MACHZ,QAAQ;MACRC,QAAQ;MACRE,WAAW;MACXJ,KAAK;MACLG,gBAAgB;MAChBE;IACJ;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}