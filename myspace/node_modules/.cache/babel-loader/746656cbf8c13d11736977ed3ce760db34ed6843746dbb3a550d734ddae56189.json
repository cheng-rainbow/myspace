{"ast":null,"code":"import ContentBase from '../components/ContentBase.vue';\nimport UserProfileInfo from '@/components/UserProfileInfo.vue';\nimport UserProfilePosts from '@/components/UserProfilePosts.vue';\nimport UserProfileWrite from '@/components/UserProfileWrite.vue';\nimport { reactive } from 'vue';\nimport { useRoute } from 'vue-router';\nimport $ from 'jquery';\nimport { useStore } from 'vuex';\nexport default {\n  name: \"UserProfileView\",\n  components: {\n    ContentBase,\n    UserProfileInfo,\n    UserProfilePosts,\n    UserProfileWrite\n  },\n  setup: () => {\n    const store = useStore();\n    const route = useRoute();\n    const userId = route.params.userId;\n    // console.log(userId);\n    const user = reactive({});\n    const posts = reactive({});\n    $.ajax({\n      url: \"https://app165.acapp.acwing.com.cn/myspace/getinfo/\",\n      type: \"GET\",\n      data: {\n        user_id: userId\n      },\n      headers: {\n        'Authorization': \"Bearer \" + store.state.user.access\n      },\n      success: resp => {\n        console.log(resp);\n        user.id = resp.id;\n        user.username = resp.username;\n        user.photo = resp.photo;\n        user.followercount = resp.followerCount;\n        user.is_followed = resp.is_followed;\n      }\n    });\n    const follow = () => {\n      if (user.is_followed) return;\n      user.followercount++;\n      user.is_followed = true;\n    };\n    const unfollow = () => {\n      if (!user.is_followed) return;\n      user.followercount--;\n      user.is_followed = false;\n    };\n    const post_a_post = content => {\n      if (content.value === \"\") return;\n      posts.count++;\n      posts.posts.unshift({\n        id: posts.count,\n        userId: 1,\n        content: content.value\n      });\n    };\n    return {\n      user,\n      // 返回的必须是一个对象, 不然子组件没法接受\n      follow,\n      unfollow,\n      posts,\n      post_a_post,\n      userId\n    };\n  }\n};","map":{"version":3,"names":["ContentBase","UserProfileInfo","UserProfilePosts","UserProfileWrite","reactive","useRoute","$","useStore","name","components","setup","store","route","userId","params","user","posts","ajax","url","type","data","user_id","headers","state","access","success","resp","console","log","id","username","photo","followercount","followerCount","is_followed","follow","unfollow","post_a_post","content","value","count","unshift"],"sources":["D:\\a.project.vscode\\项目\\vue\\myspace\\src\\views\\UserProfileView.vue"],"sourcesContent":["<template>\r\n    <ContentBase>\r\n        <div class=\"row\">\r\n            <div class=\"col-3\">\r\n                <UserProfileInfo @follow=\"follow\" @unfollow=\"unfollow\" :user=\"user\"/>\r\n                <UserProfileWrite @post_a_post=\"post_a_post\"/>\r\n            </div>\r\n            <div class=\"col-9\">\r\n                <UserProfilePosts  :posts=\"posts\"/>\r\n            </div>\r\n        </div>\r\n    </ContentBase>\r\n</template>\r\n\r\n<script>\r\nimport ContentBase from '../components/ContentBase.vue'\r\nimport UserProfileInfo from '@/components/UserProfileInfo.vue';\r\nimport UserProfilePosts from '@/components/UserProfilePosts.vue'\r\nimport UserProfileWrite from '@/components/UserProfileWrite.vue';\r\nimport { reactive } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport $ from 'jquery'\r\nimport { useStore } from 'vuex';\r\n\r\nexport default {\r\n    \r\n    name : \"UserProfileView\",\r\n    components : {\r\n        ContentBase,\r\n        UserProfileInfo,\r\n        UserProfilePosts,\r\n        UserProfileWrite\r\n    },\r\n    setup : () => {\r\n        const store = useStore();\r\n        const route = useRoute();\r\n        const userId = route.params.userId;\r\n        // console.log(userId);\r\n        const user = reactive({});\r\n        const posts = reactive({});\r\n\r\n        $.ajax({\r\n            url: \"https://app165.acapp.acwing.com.cn/myspace/getinfo/\",\r\n            type : \"GET\",\r\n            data : {\r\n                user_id : userId,\r\n            },\r\n            headers : {\r\n                'Authorization' : \"Bearer \" + store.state.user.access,\r\n            },\r\n            success : (resp) => {\r\n                console.log(resp);\r\n                user.id = resp.id;\r\n                user.username = resp.username;\r\n                user.photo = resp.photo;\r\n                user.followercount = resp.followerCount;\r\n                user.is_followed = resp.is_followed; \r\n            },\r\n        })\r\n\r\n\r\n        const follow = () => {\r\n            if (user.is_followed) return;\r\n            user.followercount ++ ;\r\n            user.is_followed = true;\r\n        }\r\n\r\n        const unfollow = () => {\r\n            if (!user.is_followed) return ;\r\n            user.followercount --;\r\n            user.is_followed = false;\r\n        }\r\n\r\n        const post_a_post = (content) => {\r\n            if (content.value === \"\") return;\r\n            posts.count ++;\r\n\r\n            posts.posts.unshift({\r\n                id : posts.count,\r\n                userId : 1,\r\n                content : content.value,\r\n            })\r\n            \r\n        }\r\n\r\n        return {\r\n            user,   // 返回的必须是一个对象, 不然子组件没法接受\r\n            follow,\r\n            unfollow,\r\n            posts,\r\n            post_a_post,\r\n            userId,\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"mappings":"AAeA,OAAOA,WAAU,MAAO,+BAA8B;AACtD,OAAOC,eAAc,MAAO,kCAAkC;AAC9D,OAAOC,gBAAe,MAAO,mCAAkC;AAC/D,OAAOC,gBAAe,MAAO,mCAAmC;AAChE,SAASC,QAAO,QAAS,KAAK;AAC9B,SAASC,QAAO,QAAS,YAAY;AACrC,OAAOC,CAAA,MAAO,QAAO;AACrB,SAASC,QAAO,QAAS,MAAM;AAE/B,eAAe;EAEXC,IAAG,EAAI,iBAAiB;EACxBC,UAAS,EAAI;IACTT,WAAW;IACXC,eAAe;IACfC,gBAAgB;IAChBC;EACJ,CAAC;EACDO,KAAI,EAAIA,CAAA,KAAM;IACV,MAAMC,KAAI,GAAIJ,QAAQ,CAAC,CAAC;IACxB,MAAMK,KAAI,GAAIP,QAAQ,CAAC,CAAC;IACxB,MAAMQ,MAAK,GAAID,KAAK,CAACE,MAAM,CAACD,MAAM;IAClC;IACA,MAAME,IAAG,GAAIX,QAAQ,CAAC,CAAC,CAAC,CAAC;IACzB,MAAMY,KAAI,GAAIZ,QAAQ,CAAC,CAAC,CAAC,CAAC;IAE1BE,CAAC,CAACW,IAAI,CAAC;MACHC,GAAG,EAAE,qDAAqD;MAC1DC,IAAG,EAAI,KAAK;MACZC,IAAG,EAAI;QACHC,OAAM,EAAIR;MACd,CAAC;MACDS,OAAM,EAAI;QACN,eAAc,EAAI,SAAQ,GAAIX,KAAK,CAACY,KAAK,CAACR,IAAI,CAACS;MACnD,CAAC;MACDC,OAAM,EAAKC,IAAI,IAAK;QAChBC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;QACjBX,IAAI,CAACc,EAAC,GAAIH,IAAI,CAACG,EAAE;QACjBd,IAAI,CAACe,QAAO,GAAIJ,IAAI,CAACI,QAAQ;QAC7Bf,IAAI,CAACgB,KAAI,GAAIL,IAAI,CAACK,KAAK;QACvBhB,IAAI,CAACiB,aAAY,GAAIN,IAAI,CAACO,aAAa;QACvClB,IAAI,CAACmB,WAAU,GAAIR,IAAI,CAACQ,WAAW;MACvC;IACJ,CAAC;IAGD,MAAMC,MAAK,GAAIA,CAAA,KAAM;MACjB,IAAIpB,IAAI,CAACmB,WAAW,EAAE;MACtBnB,IAAI,CAACiB,aAAY,EAAG;MACpBjB,IAAI,CAACmB,WAAU,GAAI,IAAI;IAC3B;IAEA,MAAME,QAAO,GAAIA,CAAA,KAAM;MACnB,IAAI,CAACrB,IAAI,CAACmB,WAAW,EAAE;MACvBnB,IAAI,CAACiB,aAAY,EAAI;MACrBjB,IAAI,CAACmB,WAAU,GAAI,KAAK;IAC5B;IAEA,MAAMG,WAAU,GAAKC,OAAO,IAAK;MAC7B,IAAIA,OAAO,CAACC,KAAI,KAAM,EAAE,EAAE;MAC1BvB,KAAK,CAACwB,KAAI,EAAI;MAEdxB,KAAK,CAACA,KAAK,CAACyB,OAAO,CAAC;QAChBZ,EAAC,EAAIb,KAAK,CAACwB,KAAK;QAChB3B,MAAK,EAAI,CAAC;QACVyB,OAAM,EAAIA,OAAO,CAACC;MACtB,CAAC;IAEL;IAEA,OAAO;MACHxB,IAAI;MAAI;MACRoB,MAAM;MACNC,QAAQ;MACRpB,KAAK;MACLqB,WAAW;MACXxB;IACJ;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}